# Lefthook configuration for near-kit-rs
# Install: https://github.com/evilmartians/lefthook
# Run `lefthook install` after cloning

pre-commit:
  commands:
    clippy:
      glob: "*.rs"
      run: cargo clippy --fix --allow-dirty --allow-staged --all-targets --all-features -- -D warnings
      stage_fixed: true
    
    rustfmt:
      glob: "*.rs"
      run: cargo fmt
      stage_fixed: true

pre-push:
  commands:
    test:
      run: cargo nextest run --all-features
      fail_text: "Tests failed. Please fix them before pushing."
